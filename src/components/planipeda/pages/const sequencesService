// ============================================================
// Titre : EditSequenceEditorPage
// Chemin : src/components/planipeda/pages/EditSequenceEditorPage.tsx
// FonctionnalitÃ©s :
//   - RÃ©cupÃ¨re l'ID de la sÃ©quence Ã  Ã©diter depuis les paramÃ¨tres d'URL (via React Router `useParams`).
//   - Valide la prÃ©sence et le format de l'ID.
//   - Affiche un message d'erreur si l'ID est invalide ou manquant.
//   - Passe l'ID de la sÃ©quence au composant `EditSequenceEditor` pour l'Ã©dition rÃ©elle.
//   - Fournit les fonctions de navigation (`onCancel`, `onSequenceUpdated`) au composant enfant.
// ============================================================

// === Importations des bibliothÃ¨ques externes ===
// CORRECTION ICI : Ajout de useCallback Ã  l'import de React
import React, { useCallback } from 'react';
import { useParams, useNavigate } from 'react-router-dom'; // Hooks de React Router

// === Importations des composants internes ===
import EditSequenceEditor from '../ScenarioEditor/EditSequenceEditor'; // Le composant d'Ã©dition principal

//Composant `EditSequenceEditorPage`

//Ce composant est la page qui rend le formulaire d'Ã©dition de sÃ©quence.

const EditSequenceEditorPage: React.FC = () => {
    // ğŸ¯ FonctionnalitÃ© : Utiliser `useNavigate` pour la redirection aprÃ¨s annulation ou succÃ¨s.
    const navigate = useNavigate();

    // ğŸ¯ FonctionnalitÃ© : RÃ©cupÃ©rer l'ID de la sÃ©quence depuis les paramÃ¨tres d'URL.
    // La route dans App.tsx est dÃ©finie avec `:id` pour l'Ã©dition de sÃ©quence.
    const { id } = useParams<{ id: string }>(); // On rÃ©cupÃ¨re 'id' de l'URL

    // ğŸ¯ FonctionnalitÃ© : Convertir l'ID de la chaÃ®ne de caractÃ¨res en nombre entier.
    // S'assure que l'ID est un nombre valide. Si 'id' est manquant ou non convertible,
    // `parsedSequenceId` sera `undefined`.
    const parsedSequenceId = id ? parseInt(id, 10) : undefined;

    // ğŸ¯ FonctionnalitÃ© : GÃ©rer les cas oÃ¹ l'ID est invalide ou manquant.
    // Affiche un message d'erreur clair si l'URL ne fournit pas un ID de sÃ©quence valide.
    if (!parsedSequenceId) {
        return (
            <div className="flex flex-col justify-center items-center h-screen text-lg text-red-600">
                <p>Erreur: ID de sÃ©quence invalide ou manquant dans l'URL.</p>
                <button onClick={() => navigate('/planipeda/sequences')} className="ml-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 mt-4">
                    Retour aux SÃ©quences
                </button>
            </div>
        );
    }

    // ğŸ¯ FonctionnalitÃ© : DÃ©finir la logique d'annulation de l'Ã©dition.
    // Redirige l'utilisateur vers la page de liste des sÃ©quences.
    const handleCancel = useCallback(() => {
        navigate('/planipeda/sequences');
    }, [navigate]);

    // ğŸ¯ FonctionnalitÃ© : DÃ©finir la logique aprÃ¨s une mise Ã  jour rÃ©ussie de la sÃ©quence.
    // Redirige l'utilisateur vers la page de liste des sÃ©quences.
    const handleSequenceUpdated = useCallback(() => {
        navigate('/planipeda/sequences');
    }, [navigate]);

    // ğŸ¯ Rendu : Affiche le titre de la page et le composant `EditSequenceEditor`.
    // Le `parsedSequenceId` est passÃ© comme prop au composant enfant.
    return (
        <div className="p-6">
            <h1 className="text-3xl font-bold mb-6 text-gray-900">Modifier la SÃ©quence</h1>
            <EditSequenceEditor
                sequenceId={parsedSequenceId}
                onCancel={handleCancel}
                onSequenceUpdated={handleSequenceUpdated}
            />
        </div>
    );
};

export default EditSequenceEditorPage;